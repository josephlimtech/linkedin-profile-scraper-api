{"version":3,"file":"linkedin.js","sourceRoot":"/","sources":["scraper/linkedin.ts"],"names":[],"mappings":"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","sourcesContent":["require('dotenv').config()\nimport puppeteer from 'puppeteer';\nimport { Location } from '../utils'\n\nimport {\n  getDurationInDays,\n  formatDate,\n  getCleanText,\n  getLocationFromText,\n  statusLog\n} from '../utils';\n\ninterface Profile {\n  fullName: string;\n  title: string;\n  location: Location | null;\n  photo: string;\n  description: string;\n  url: string;\n}\n\ninterface Experience {\n  title: string;\n  company: string;\n  employmentType: string;\n  location: Location | null;\n  startDate: string | null;\n  endDate: string | null;\n  endDateIsPresent: boolean;\n  durationInDays: number | null;\n  description: string;\n}\n\ninterface Education {\n  schoolName: string;\n  degreeName: string;\n  fieldOfStudy: string;\n  startDate: string | null;\n  endDate: string | null;\n  durationInDays: number | null;\n}\n\ninterface Skill {\n  skillName: string | null;\n  endorsementCount: number | null;\n}\n\nexport const setupScraper = async () => {\n  try {\n    // Important: Do not block \"stylesheet\", makes the crawler not work for LinkedIn\n    const blockedResources = ['image', 'media', 'font', 'texttrack', 'object', 'beacon', 'csp_report', 'imageset'];\n    const logSection = 'setup'\n\n    statusLog(logSection, 'Launching puppeteer in the background...')\n\n    const browser = await puppeteer.launch({\n      headless: true,\n      args: [\n        '--no-sandbox',\n        '--disable-setuid-sandbox',\n        \"--proxy-server='direct://\",\n        '--proxy-bypass-list=*',\n        '--disable-dev-shm-usage',\n        '--disable-accelerated-2d-canvas',\n        '--disable-gpu'\n      ]\n    })\n\n    statusLog(logSection, 'Puppeteer launched!')\n\n    const page = await browser.newPage()\n\n    statusLog(logSection, `Blocking the following resources: ${blockedResources.join(', ')}`)\n\n    // Block loading of resources, like images and css, we dont need that\n    await page.setRequestInterception(true);\n\n    page.on('request', (req) => {\n      if (blockedResources.includes(req.resourceType())) {\n        req.abort()\n      } else {\n        req.continue()\n      }\n    })\n\n    // Speed improvement: https://github.com/GoogleChrome/puppeteer/issues/1718#issuecomment-425618798\n    await page.setUserAgent('Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36')\n\n    await page.setViewport({\n      width: 1200,\n      height: 720\n    })\n\n    statusLog(logSection, `Setting session cookie using cookie: ${process.env.LINKEDIN_SESSION_COOKIE_VALUE}`)\n\n    await page.setCookie({\n      'name': 'li_at',\n      'value': `${process.env.LINKEDIN_SESSION_COOKIE_VALUE}`,\n      'domain': '.www.linkedin.com'\n    })\n\n    statusLog(logSection, 'Session cookie set!')\n\n    statusLog(logSection, 'Browsing to LinkedIn.com in the background using a headless browser...')\n\n    await page.goto('https://www.linkedin.com/', {\n      waitUntil: 'domcontentloaded'\n    })\n\n    statusLog(logSection, 'Adding helper methods to page')\n\n    await Promise.all([\n      page.exposeFunction('getCleanText', getCleanText),\n      page.exposeFunction('formatDate', formatDate),\n      page.exposeFunction('getDurationInDays', getDurationInDays),\n      page.exposeFunction('getLocationFromText', getLocationFromText)\n    ]);\n\n    statusLog(logSection, 'Checking if we are logged in successfully...')\n\n    const isLoggedIn = await checkIfLoggedIn(page);\n\n    if (!isLoggedIn) {\n      statusLog(logSection, 'Error! Scraper not logged in into LinkedIn')\n      throw new Error('Scraper not logged in into LinkedIn')\n    }\n\n    statusLog(logSection, 'Done!')\n\n    return {\n      page,\n      browser\n    }\n  } catch (err) {\n    throw new Error(err)\n  }\n};\n\nexport const checkIfLoggedIn = async (page) => {\n  const logSection = 'authentication'\n\n  statusLog(logSection, 'Check if we are still logged in...')\n\n  const isLoggedIn = await page.$('#login-email') === null\n\n  if (isLoggedIn) {\n    statusLog(logSection, 'All good. We are still logged in.')\n  } else {\n    statusLog(logSection, 'Bad news. We are not logged in. Session is expired or our check to see if we are loggedin is not correct anymore.')\n  }\n\n  return isLoggedIn\n};\n\nexport const getLinkedinProfileDetails = async (page, profileUrl) => {\n  const logSection = 'scraping'\n\n  const scraperSessionId = new Date().getTime();\n\n  statusLog(logSection, `Navigating to LinkedIn profile: ${profileUrl}`, scraperSessionId)\n\n  await page.goto(profileUrl, {\n    waitUntil: 'domcontentloaded'\n  });\n\n  statusLog(logSection, 'LinkedIn profile page loaded!', scraperSessionId)\n\n  statusLog(logSection, 'Getting all the LinkedIn profile data by scrolling the page to the bottom, so all the data gets loaded into the page...', scraperSessionId)\n\n  await autoScroll(page);\n\n  statusLog(logSection, 'Parsing data...', scraperSessionId)\n\n  // Only click the expanding buttons when they exist\n  const expandButtonsSelectors = [\n    '.pv-profile-section.pv-about-section .lt-line-clamp__more', // About\n    '#experience-section .pv-profile-section__see-more-inline.link', // Experience\n    '.pv-profile-section.education-section button.pv-profile-section__see-more-inline', // Education\n    '.pv-skill-categories-section [data-control-name=\"skill_details\"]', // Skills\n  ];\n\n  const seeMoreButtonsSelectors = ['.pv-entity__description .lt-line-clamp__line.lt-line-clamp__line--last .lt-line-clamp__more[href=\"#\"]', '.lt-line-clamp__more[href=\"#\"]:not(.lt-line-clamp__ellipsis--dummy)']\n\n  statusLog(logSection, 'Expanding all sections by clicking their \"See more\" buttons', scraperSessionId)\n\n  for (const buttonSelector of expandButtonsSelectors) {\n    if (await page.$(buttonSelector) !== null) {\n      statusLog(logSection, `Clicking button ${buttonSelector}`, scraperSessionId)\n      await page.click(buttonSelector);\n    }\n  }\n\n  // To give a little room to let data appear. Setting this to 0 might result in \"Node is detached from document\" errors\n  await page.waitFor(100);\n\n  statusLog(logSection, 'Expanding all descriptions by clicking their \"See more\" buttons', scraperSessionId)\n\n  for (const seeMoreButtonSelector of seeMoreButtonsSelectors) {\n    const buttons = await page.$$(seeMoreButtonSelector)\n\n    for (const button of buttons) {\n      if (button) {\n        statusLog(logSection, `Clicking button ${seeMoreButtonSelector}`, scraperSessionId)\n        await button.click()\n      }\n    }\n  }\n\n  statusLog(logSection, 'Parsing profile data...', scraperSessionId)\n\n  const userProfile: Profile = await page.evaluate(async () => {\n    const profileSection = document.querySelector('.pv-top-card')\n\n    const url = window.location.href\n\n    const fullNameElement = profileSection?.querySelector('.pv-top-card--list li:first-child')\n    const fullName = (fullNameElement && fullNameElement.textContent) ? window.getCleanText(fullNameElement.textContent) : null\n\n    const titleElement = profileSection?.querySelector('h2')\n    const title = (titleElement && titleElement.textContent) ? window.getCleanText(titleElement.textContent) : null\n\n    const locationElement = profileSection?.querySelector('.pv-top-card--list.pv-top-card--list-bullet.mt1 li:first-child')\n    const locationText = (locationElement && locationElement.textContent) ? window.getCleanText(locationElement.textContent) : null\n    const location = getLocationFromText(locationText)\n\n    const photoElement = profileSection?.querySelector('.pv-top-card__photo') || profileSection?.querySelector('.profile-photo-edit__preview')\n    const photo = (photoElement && photoElement.getAttribute('src')) ? photoElement.getAttribute('src') : null\n\n    const descriptionElement = document.querySelector('.pv-about__summary-text .lt-line-clamp__raw-line') // Is outside \"profileSection\"\n    const description = (descriptionElement && descriptionElement.textContent) ? window.getCleanText(descriptionElement.textContent) : null\n\n    return {\n      fullName,\n      title,\n      location,\n      photo,\n      description,\n      url\n    } as Profile\n  })\n\n\n  statusLog(logSection, `Got user profile data: ${JSON.stringify(userProfile)}`, scraperSessionId)\n\n  statusLog(logSection, `Parsing experiences data...`, scraperSessionId)\n\n  const experiences: Experience[] = await page.$$eval('#experience-section ul > .ember-view', (nodes) => {\n    let data: Experience[] = []\n\n    // Using a for loop so we can use await inside of it\n    for (const node of nodes) {\n      const titleElement = node.querySelector('h3');\n      const title = (titleElement && titleElement.textContent) ? window.getCleanText(titleElement.textContent) : null\n\n      const employmentTypeElement = node.querySelector('span.pv-entity__secondary-title');\n      const employmentType = (employmentTypeElement && employmentTypeElement.textContent) ? window.getCleanText(employmentTypeElement.textContent) : null\n\n      const companyElement = node.querySelector('.pv-entity__secondary-title');\n      const companyElementClean = companyElement.removeChild(companyElement.querySelector('span'));\n      const company = (companyElementClean && companyElementClean.textContent) ? window.getCleanText(companyElementClean.textContent) : null\n\n      const descriptionElement = node.querySelector('.pv-entity__description');\n      const description = (descriptionElement && descriptionElement.textContent) ? window.getCleanText(descriptionElement.textContent) : null\n\n      const dateRangeElement = node.querySelector('.pv-entity__date-range span:nth-child(2)');\n      const dateRangeText = (dateRangeElement && dateRangeElement.textContent) ? window.getCleanText(dateRangeElement.textContent) : null\n\n      const startDatePart = (dateRangeText) ? window.getCleanText(dateRangeText.split('–')[0]) : null;\n      const startDate = (startDatePart) ? formatDate(startDatePart) : null\n\n      const endDatePart = (dateRangeText) ? window.getCleanText(dateRangeText.split('–')[1]) : null;\n      const endDateIsPresent = (endDatePart) ? endDatePart.trim().toLowerCase() === 'present' : false;\n      const endDate = (endDatePart && !endDateIsPresent) ? formatDate(endDatePart) : null;\n\n      const durationInDaysWithEndDate = (startDate && endDate && !endDateIsPresent) ? getDurationInDays(startDate, endDate) : null\n      const durationInDaysForPresentDate = (endDateIsPresent && startDate) ? getDurationInDays(startDate, new Date()) : null\n      const durationInDays = endDateIsPresent ? durationInDaysForPresentDate : durationInDaysWithEndDate;\n\n      const locationElement = node.querySelector('.pv-entity__location span:nth-child(2)');\n      const locationText = (locationElement && locationElement.textContent) ? window.getCleanText(locationElement.textContent) : null\n      const location = getLocationFromText(locationText)\n\n      data.push({\n        title,\n        company,\n        employmentType,\n        location,\n        startDate,\n        endDate,\n        endDateIsPresent,\n        durationInDays,\n        description\n      })\n    }\n\n    return data;\n  });\n\n\n  statusLog(logSection, `Got experiences data: ${JSON.stringify(experiences)}`, scraperSessionId)\n\n  statusLog(logSection, `Parsing education data...`, scraperSessionId)\n\n  const education: Education[] = await page.$$eval('#education-section ul > .ember-view', async (nodes) => {\n    // Note: the $$eval context is the browser context.\n    // So custom methods you define in this file are not available within this $$eval.\n    let data: Education[] = []\n    for (const node of nodes) {\n\n      const schoolNameElement = node.querySelector('h3.pv-entity__school-name');\n      const schoolName = (schoolNameElement && schoolNameElement.textContent) ? window.getCleanText(schoolNameElement.textContent) : null;\n\n      const degreeNameElement = node.querySelector('.pv-entity__degree-name .pv-entity__comma-item');\n      const degreeName = (degreeNameElement && degreeNameElement.textContent) ? window.getCleanText(degreeNameElement.textContent) : null;\n\n      const fieldOfStudyElement = node.querySelector('.pv-entity__fos .pv-entity__comma-item');\n      const fieldOfStudy = (fieldOfStudyElement && fieldOfStudyElement.textContent) ? window.getCleanText(fieldOfStudyElement.textContent) : null;\n\n      // const gradeElement = node.querySelector('.pv-entity__grade .pv-entity__comma-item');\n      // const grade = (gradeElement && gradeElement.textContent) ? window.getCleanText(fieldOfStudyElement.textContent) : null;\n\n      const dateRangeElement = node.querySelectorAll('.pv-entity__dates time');\n\n      const startDatePart = (dateRangeElement && dateRangeElement[0] && dateRangeElement[0].textContent) ? window.getCleanText(dateRangeElement[0].textContent) : null;\n      const startDate = (startDatePart) ? formatDate(startDatePart) : null\n\n      const endDatePart = (dateRangeElement && dateRangeElement[1] && dateRangeElement[1].textContent) ? window.getCleanText(dateRangeElement[1].textContent) : null;\n      const endDate = (endDatePart) ? formatDate(endDatePart) : null\n\n      const durationInDays = (startDate && endDate) ? getDurationInDays(startDate, endDate) : null\n\n      data.push({\n        schoolName,\n        degreeName,\n        fieldOfStudy,\n        startDate,\n        endDate,\n        durationInDays\n      })\n    }\n\n    return data\n  });\n\n  statusLog(logSection, `Got education data: ${JSON.stringify(education)}`, scraperSessionId)\n\n  statusLog(logSection, `Parsing skills data...`, scraperSessionId)\n\n  const skills: Skill[] = await page.$$eval('.pv-skill-categories-section ol > .ember-view', nodes => {\n    // Note: the $$eval context is the browser context.\n    // So custom methods you define in this file are not available within this $$eval.\n\n    return nodes.map((node) => {\n      const skillName = node.querySelector('.pv-skill-category-entity__name-text');\n      const endorsementCount = node.querySelector('.pv-skill-category-entity__endorsement-count');\n\n      return {\n        skillName: (skillName) ? skillName.textContent.trim() : null,\n        endorsementCount: (endorsementCount) ? parseInt(endorsementCount.textContent.trim()) : 0\n      } as Skill;\n    }) as Skill[]\n  });\n\n  statusLog(logSection, `Got skills data: ${JSON.stringify(skills)}`, scraperSessionId)\n\n  statusLog(logSection, `Done! Returned profile details for: ${profileUrl}`, scraperSessionId)\n\n  return {\n    userProfile,\n    experiences,\n    education,\n    skills\n  }\n};\n\nasync function autoScroll(page) {\n  await page.evaluate(async () => {\n    await new Promise((resolve, reject) => {\n      var totalHeight = 0;\n      var distance = 500;\n      var timer = setInterval(() => {\n        var scrollHeight = document.body.scrollHeight;\n        window.scrollBy(0, distance);\n        totalHeight += distance;\n\n        if (totalHeight >= scrollHeight) {\n          clearInterval(timer);\n          resolve();\n        }\n      }, 100);\n    });\n  });\n}\n"]}